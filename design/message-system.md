# メッセージとは #
ここでのメッセージとは、 **CharacterとCharacter同士のやり取りを行う仕組み** を指す。メッセージを媒介した処理以外では、Character同士が相互に連絡するようなことを行うことは出来ない。

## メッセージ自体の実装 ##
メッセージはシンプルな多相ヴァリアントで扱われる。事前に必要なメッセージは定義されており、それぞれのメッセージには、必ず送信者であるCharacterのActorが設定されていなければならない。

# メッセージの仕組み #
メッセージは、CharacterとCharacter同士が直接やり取りを行うのではなく、Characterが行動した結果として生成されて、それが伝播していく、という仕組みを取る。

この仕組み全体がメッセージシステムであり、基本的には、メッセージキューに貯められたメッセージを順に処理していって、最終的に空になるまで伝播を続ける、という、全体としてはシンプルな仕組みになる。

全てのメッセージは、Characterのメッセージハンドラでのみ消費され、他の手段では消費されることがない。もし対象のCharacterが処理しないメッセージ種別があった場合は、メッセージハンドラの責任として、明示的にそのメッセージを破棄（Noneを返す）しなければならない。

# メッセージキューの在り処 #
全てのメッセージを中央集権的にまとめる箇所として存在するメッセージキューは、基本的には一つのキューだけが存在しており、このメッセージキューに都度メッセージが入れられていく。

メッセージキューにメッセージを入れられるのは、さらに高位のシステムであるゲームターンシステムのみである。

