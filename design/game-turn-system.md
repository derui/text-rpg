# ゲームターンの定義 #
ゲームターンとは、以下の要素で構成される処理単位である。

- プレイヤーの入力を受付
- すべてのキャラクターに対する行動順序の更新
- 行動可能状態になったキャラクターの行動

行動可能状態に対する更新は、ターンのはじめに一度だけ行われる。行動可能状態になるキャラクターは、後述する速度の関係で複数回の行動を行うケースがある。

プレイヤーは特殊で、入力が行われるまではターンが進行しない。このため、ターンの進行とレンダリングは無関係となる。

# ゲームターンと速度の関係 #
ゲームターンがひとつ経過すると、一定の速度が経過する。この値を **基準速度** と呼ぶ。

すべてのオブジェクトには速度というステータスが存在する。速度とは、実際には基準速度に対する割合を表す。この割合が1.0のとき、１ターンにつき１回の行動を行うことができる。2.0の場合は、二回行動を行うことができる。1.5の場合、3ターンに一回程度２回行動ができる。このため、現在の行動ポイントというものをActorは保存している。

ゲームターンが進む条件は、ユーザーの入力が行われたタイミングで初めて進む。ただし、論理的なゲームターンと、見た目上のゲームターンは異なる。

## 論理ゲームターンと物理ゲームターン ##
論理ゲームターンとは、その通り論理的なゲームの一単位を表す。どういったものが論理ゲームターンとなるかというと、以下のような構成が対応する。

- プレイヤーの入力を一回だけ受け付ける
- 全てのキャラクターの行動ポイントを更新する
- 行動ポイントを元にした行動順の制御
- 各キャラクターの行動

物理ゲームターンとは、実際に物理的に流れる時間に従ったゲームターンを指す。これは、論理ゲームターンとは関係なく、どちらかというとレンダリング処理2関連する。論理ターンは一秒間に60FPSなどといった単位で進行することができるが、物理的にはアニメーションなども必要となる。そのため、一回の行動につきアニメーションが行われる必要がある。
そのため、物理ターンの一回につき、アップデートフェイズとレンダリングフェイズに別れる。アップデートフェイズは、論理ターンをひとつだけ進めることができるが、入力がない場合は何も行わない。また、アップデートフェイズでは、レンダリングフェイズでのみ利用するような情報＝描画に関する情報は別に保持することで、論理ターンが進まない場合でも、レンダリングだけは各キャラクターで独自に行わせることができる。

レンダリング処理と論理処理を分離するために、ActorはCharacterとObjectという二つのモジュールと関連付けられる。ObjectはCharacterを参照するが、Character自体を更新することはできない。

